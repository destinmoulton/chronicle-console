<!doctype html>
<html>
<head>
    <title>Chronicle Console - Actions</title>
    <script src="../index.js" ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <h3>Chronicle Console - Actions Tester</h3>
        <fieldset>
            <legend>Configuration</legend>
            Server: <input type="text" id="input-server" size="60"/>
            <br/>
            App Test Name: <input type="text" id="input-app" size="60"/>
            <button id="start-test" onClick="startTest()">Initialize</button>
        </fieldset>
    <hr>
    <div style="display:none" id="navbar">
        <button onClick="mockChangeView('home')">Home</button>
        <button onClick="mockChangeView('about')">About</button>
        <button onClick="mockChangeView('pricing')">Pricing</button>
        <button onClick="mockChangeView('contact')">Contact</button>
        <hr>
    </div>
    <script type="text/javascript">
        $(()=>{
            const rando = Math.ceil(Math.random() * 10);

            const params = {
                method: "get",
                headers: {
                    'Origin':'https://swapi.co',
                    "Accept":"application/json"
                }
            }
            fetch("https://swapi.co/api/people/"+rando, params)
                .then((res)=>res.json())
                .then((person)=>{
                    console.log(person);
                });

        });

        function startTest(){
            
            var server = document.getElementById("input-server").value;
            var app = document.getElementById("input-app").value;
            
            if( server && app){
                var config = {
                    server: server,
                    app: app,
                    toConsole: true
                }
                ChronicleConsole.init(config);

                console.action("user:pageload", "home");

                // Show the navbar
                $("#navbar").show();
            }
        }

        function mockChangeView(viewName){
            console.action("user:browse", viewName);
        }

        function login(){
            console.action("user:login", {username: ""});
        }

    </script>
</body>
</html>